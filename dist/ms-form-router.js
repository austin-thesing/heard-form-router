(function(){var P={FORM_FIELDS:{multiOwner:"is_your_practice_a_c_corp_or_our_does_it_have_multiple_owners_",state:"state",practiceSetup:"how_is_your_business_setup__v2",income:"what_is_your_expected_annual_income_for_2024___1099__private_practice_",practiceRunning:"how_long_have_you_been_running_your_private_practice_",profession:"what_best_describes_your_practice_",employeeCount:"does_your_practice_employ_any_w2_employees_or_1099_contractors_who_see_patients_"},HUBSPOT_CALENDARS:{SOLE_PROP:{url:"https://meetings.hubspot.com/bz/consultations?embed=true",title:"Schedule a Call"},S_CORP:{url:"https://meetings.hubspot.com/bz/consultation?embed=true",title:"Schedule a Call"}},LANDING_PAGES:{FREE_TRIAL:"/thank-you/free-trial",SCHEDULER:"/thank-you/schedule",NOT_QUALIFIED:"/thank-you/success"},DISQUALIFYING_CONDITIONS:{multiOwner:["yes"],state:["international"],practiceSetup:["c corp"],income:["none","less than $20,000"],profession:["dietician","nutritionist","massage therapist","dietician or nutritionist","dietetics or nutrition counseling"],practiceRunning:["opening practice in 1+ month","opening in 1+ months"],employeeCount:["yes (more than 10 employees)"]},INCOME_TIERS:{QUALIFIED_INCOME:["$20,000 - $49,999","$50,000 - $99,999","more than $100,000"]},determineRoute(A){let B=(A[this.FORM_FIELDS.multiOwner]||"").toLowerCase(),G=(A[this.FORM_FIELDS.state]||"").toLowerCase(),V=(A[this.FORM_FIELDS.practiceSetup]||"").toLowerCase(),K=(A[this.FORM_FIELDS.income]||"").toLowerCase(),J=(A[this.FORM_FIELDS.practiceRunning]||"").toLowerCase(),L=(A[this.FORM_FIELDS.profession]||"").toLowerCase(),H=(A[this.FORM_FIELDS.employeeCount]||"").toLowerCase();console.log("Form Router Debug:",{multiOwner:B,state:G,practiceSetup:V,income:K,practiceRunning:J,profession:L,employeeCount:H,formData:A});let M=this.DISQUALIFYING_CONDITIONS.multiOwner.includes(B)||this.DISQUALIFYING_CONDITIONS.state.includes(G)||this.DISQUALIFYING_CONDITIONS.practiceSetup.includes(V)||this.DISQUALIFYING_CONDITIONS.income.includes(K)||this.DISQUALIFYING_CONDITIONS.profession.some((N)=>L.includes(N))||this.DISQUALIFYING_CONDITIONS.practiceRunning.includes(J)||this.DISQUALIFYING_CONDITIONS.employeeCount.includes(H);if(console.log("isDQ",M),M)return console.log("Form Router: Not qualified due to DQ conditions"),"NOT_QUALIFIED";if(this.INCOME_TIERS.QUALIFIED_INCOME.some((N)=>K.includes(N)))return console.log("Form Router: Qualified for scheduler"),"SCHEDULER";return console.log("Form Router: Not qualified (default)"),"NOT_QUALIFIED"}};if(typeof window!=="undefined")window.FormRouterConfig=P;var W=!1;function Y(){if(W)return;let A=document.querySelector(".right_step_form form");if(!A){setTimeout(Y,500);return}console.log("MS Form - Adding field tracking"),A.querySelectorAll("input, select").forEach((B)=>{B.addEventListener("change",function(G){console.log("MS Form - Field Changed:",{name:G.target.name,value:G.target.value})})}),W=!0}function X(A){let G=`; ${document.cookie}`.split(`; ${A}=`);if(G.length===2)return G.pop().split(";").shift();return null}window.addEventListener("message",function(A){if(A.data.type==="hsFormCallback"){if(A.data.eventName==="onFormReady")console.log("MS Form - Form Ready"),setTimeout(Y,1000);if(A.data.eventName==="onFormSubmit"){console.log("MS Form - Form Submitted");let B;try{B=JSON.parse(localStorage.getItem("hubspot_form_data")||"{}"),console.log("MS Form - Retrieved stored form data:",B)}catch(H){console.error("MS Form - Failed to retrieve stored form data:",H),B={}}let G=A.data.data;if(G&&Array.isArray(G))G.forEach((H)=>{B[H.name]=H.value});let V=new Date().toISOString();if(console.log("MS Form - Final form data:",B),Object.keys(B).length===0)console.error("MS Form - No form data available");let K=P.determineRoute(B);console.log("MS Form - Determined route:",K);let J=P.LANDING_PAGES[K]||P.LANDING_PAGES.NOT_QUALIFIED;console.log("MS Form - Base URL:",J);let L=X("hubspotutk");if(console.log("MS Form - Retrieved hutk:",L),L){let H=J.includes("?")?"&":"?";J+=`${H}hubspotUtk=${L}`,console.log("MS Form - Appended hutk to URL:",J)}else console.warn("MS Form - hubspotutk cookie not found. Cannot append to URL.");console.log("MS Form - Redirecting to:",J),setTimeout(()=>{try{window.location.href=J}catch(H){console.error("MS Form - Redirect failed:",H);let M=P.LANDING_PAGES.NOT_QUALIFIED,N=X("hubspotutk");if(N){let Z=M.includes("?")?"&":"?";M+=`${Z}hubspotUtk=${N}`}window.location.href=M}},700)}}});
})();